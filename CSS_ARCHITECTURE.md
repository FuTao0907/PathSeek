# CSS 架构重构文档

## 概述

本项目的CSS架构已经完全重构为模块化设计，提高了代码的可维护性、可扩展性和性能。

## 新的文件结构

```
src/styles/
├── variables.css      # CSS变量系统（设计令牌）
├── components.css     # 可复用组件样式
├── markdown.css       # Markdown内容专用样式
├── responsive.css     # 响应式设计模块
├── Post.css          # 文章页面特定样式
└── ...
```

## 核心改进

### 1. CSS变量系统 (variables.css)

- **颜色系统**: 主色调、辅助色、状态色、深色模式支持
- **字体系统**: 字体族、字重、字号层级
- **间距系统**: 统一的间距比例（0.25rem基数）
- **阴影系统**: 多层级阴影效果
- **过渡动画**: 统一的动画时长和缓动函数
- **断点系统**: 响应式设计断点

### 2. 模块化组件 (components.css)

- **按钮组件**: 主要、次要、危险状态
- **标签组件**: 多种颜色和尺寸
- **卡片组件**: 统一的卡片样式
- **进度条**: 阅读进度指示器
- **浮动按钮**: 返回顶部等操作

### 3. Markdown样式 (markdown.css)

- **标题层级**: H1-H6完整样式系统
- **文本元素**: 段落、列表、引用
- **代码样式**: 行内代码和代码块
- **表格样式**: 响应式表格设计
- **媒体元素**: 图片、链接、分隔线

### 4. 响应式设计 (responsive.css)

- **流体排版**: 基于视口的字体缩放
- **容器查询**: 现代CSS容器查询支持
- **网格布局**: 响应式网格系统
- **设备适配**: 平板、手机、桌面优化
- **可访问性**: 动画偏好、高对比度支持

## 设计令牌使用示例

```css
/* 颜色使用 */
color: var(--primary-color);        /* 主色调 */
background: var(--surface-color);   /* 表面颜色 */
border-color: var(--border-color);  /* 边框颜色 */

/* 间距使用 */
margin: var(--spacing-lg);          /* 大间距 */
padding: var(--spacing-md);         /* 中等间距 */
gap: var(--spacing-sm);             /* 小间距 */

/* 字体使用 */
font-size: var(--font-size-xl);     /* 大字号 */
font-weight: var(--font-weight-medium); /* 中等字重 */
font-family: var(--font-mono);      /* 等宽字体 */

/* 圆角使用 */
border-radius: var(--radius-lg);    /* 大圆角 */

/* 阴影使用 */
box-shadow: var(--shadow-md);       /* 中等阴影 */

/* 过渡使用 */
transition: var(--transition-base); /* 基础过渡 */
```

## 响应式断点

```css
/* 移动设备 */
@media (max-width: 768px) { ... }

/* 小屏移动设备 */
@media (max-width: 480px) { ... }

/* 平板设备 */
@media (min-width: 769px) and (max-width: 1024px) { ... }

/* 桌面设备 */
@media (min-width: 1025px) { ... }
```

## 深色模式支持

```css
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #1a1a1a;
    --text-color: #e5e5e5;
    --surface-color: #2d2d2d;
    /* ... 其他深色模式变量 */
  }
}
```

## 可访问性特性

- **动画偏好**: 尊重用户的动画偏好设置
- **高对比度**: 支持高对比度模式
- **键盘导航**: 优化的焦点样式
- **屏幕阅读器**: 语义化的CSS结构

## 性能优化

- **CSS变量**: 减少重复代码，提高缓存效率
- **模块化**: 按需加载，减少初始包大小
- **现代CSS**: 使用现代CSS特性提高渲染性能
- **压缩优化**: PostCSS自动优化和压缩

## 开发工具

### Stylelint配置

```bash
npm run css:lint    # 检查CSS代码质量
npm run css:build   # 构建优化后的CSS
npm run css:watch   # 监听模式开发
```

### PostCSS处理

- **自动前缀**: Autoprefixer自动添加浏览器前缀
- **变量处理**: 自动处理CSS自定义属性
- **嵌套支持**: CSS嵌套语法支持
- **压缩优化**: 生产环境自动压缩

## 迁移指南

### 从旧样式迁移

1. **替换硬编码值**: 使用CSS变量替换固定值
2. **模块化导入**: 按需导入样式模块
3. **响应式优化**: 使用新的响应式系统
4. **组件复用**: 使用预定义的组件样式

### 最佳实践

1. **优先使用变量**: 避免硬编码颜色、间距等值
2. **语义化命名**: 使用有意义的CSS类名
3. **模块化思维**: 将样式按功能模块组织
4. **性能考虑**: 避免过度嵌套和复杂选择器

## 未来扩展

- **主题系统**: 支持多主题切换
- **组件库**: 扩展更多可复用组件
- **动画库**: 统一的动画效果库
- **工具类**: CSS工具类系统

## 总结

新的CSS架构提供了：
- ✅ 更好的代码组织和维护性
- ✅ 统一的设计系统
- ✅ 优秀的响应式支持
- ✅ 现代化的开发体验
- ✅ 更好的性能表现
- ✅ 完整的可访问性支持

这个架构为项目的长期发展奠定了坚实的基础。